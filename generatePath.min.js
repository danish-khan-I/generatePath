"use strict";function generatePath(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:compilePath(e)(t,{pretty:!0})}var cache={},cacheLimit=1e4,cacheCount=0,pathToRegexp_1=pathToRegexp,compile_1=compile;pathToRegexp_1.compile=compile;var isarray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},PATH_REGEXP=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function compilePath(e){if(cache[e])return cache[e];var t=pathToRegexp_1.compile(e);return cacheCount<cacheLimit&&(cache[e]=t,cacheCount++),t}function pathToRegexp(e,t,r){return isarray(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?regexpToRegexp(e,t):(isarray(e)?arrayToRegexp:stringToRegexp)(e,t,r)}function regexpToRegexp(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return attachKeys(e,t)}function attachKeys(e,t){return e.keys=t,e}function arrayToRegexp(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(pathToRegexp(e[o],t,r).source);return attachKeys(new RegExp("(?:"+n.join("|")+")",flags(r)),t)}function flags(e){return e.sensitive?"":"i"}function stringToRegexp(e,t,r){return tokensToRegExp(parse(e,r),t,r)}function tokensToRegExp(e,t,r){isarray(t)||(r=t||r,t=[]);for(var n=(r=r||{}).strict,o=!1!==r.end,a="",i=0;i<e.length;i++){var p,c,u=e[i];"string"==typeof u?a+=escapeString(u):(p=escapeString(u.prefix),c="(?:"+u.pattern+")",t.push(u),u.repeat&&(c+="(?:"+p+c+")*"),a+=c=u.optional?u.partial?p+"("+c+")?":"(?:"+p+"("+c+"))?":p+"("+c+")")}var s=escapeString(r.delimiter||"/"),l=a.slice(-s.length)===s;return n||(a=(l?a.slice(0,-s.length):a)+"(?:"+s+"(?=$))?"),a+=o?"$":n&&l?"":"(?="+s+"|$)",attachKeys(new RegExp("^"+a,flags(r)),t)}function parse(e,t){for(var r=[],n=0,o=0,a="",i=t&&t.delimiter||"/";null!=(l=PATH_REGEXP.exec(e));){var p,c,u,s,l,g,f=l[0],h=l[1],x=l.index;a+=e.slice(o,x),o=x+f.length,h?a+=h[1]:(s=e[o],p=l[2],c=l[3],u=l[4],g=l[5],x=l[6],f=l[7],a&&(r.push(a),a=""),h=null!=p&&null!=s&&s!==p,s="+"===x||"*"===x,x="?"===x||"*"===x,l=l[2]||i,g=u||g,r.push({name:c||n++,prefix:p||"",delimiter:l,optional:x,repeat:s,partial:h,asterisk:!!f,pattern:g?escapeGroup(g):f?".*":"[^"+escapeString(l)+"]+?"}))}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function escapeString(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function escapeGroup(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function compile(e,t){return tokensToFunction(parse(e,t))}function tokensToFunction(s){for(var l=new Array(s.length),e=0;e<s.length;e++)"object"==typeof s[e]&&(l[e]=new RegExp("^(?:"+s[e].pattern+")$"));return function(e,t){for(var r="",n=e||{},o=(t||{}).pretty?encodeURIComponentPretty:encodeURIComponent,a=0;a<s.length;a++){var i=s[a];if("string"!=typeof i){var p,c=n[i.name];if(null==c){if(i.optional){i.partial&&(r+=i.prefix);continue}throw new TypeError('Expected "'+i.name+'" to be defined')}if(isarray(c)){if(!i.repeat)throw new TypeError('Expected "'+i.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(i.optional)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var u=0;u<c.length;u++){if(p=o(c[u]),!l[a].test(p))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but received `'+JSON.stringify(p)+"`");r+=(0===u?i.prefix:i.delimiter)+p}}else{if(p=(i.asterisk?encodeAsterisk:o)(c),!l[a].test(p))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but received "'+p+'"');r+=i.prefix+p}}else r+=i}return r}}function encodeURIComponentPretty(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function encodeAsterisk(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}
